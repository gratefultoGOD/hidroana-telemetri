# ============================================
# NGINX.CONF EK AYARLARI
# Bu ayarları /etc/nginx/nginx.conf dosyanıza ekleyin
# ============================================

# http { } bloğunun İÇİNE eklenecek satırlar:
# ------------------------------------------------

# TCP optimizasyonu - 2G için kritik
tcp_nodelay on;          # Nagle algoritmasını devre dışı bırakır (küçük paketler hemen gönderilir)

# Keepalive ayarları
keepalive_requests 1000; # Aynı bağlantıda daha fazla istek

# Buffer ayarları - küçük telemetri verisi için optimize
client_body_buffer_size 1k;
client_header_buffer_size 1k;
client_max_body_size 1k;
large_client_header_buffers 2 1k;

# Timeout'lar - 2G GSM için UZUN tutulmalı
client_body_timeout 60;   # Artırıldı (10 → 60)
client_header_timeout 60; # Artırıldı (10 → 60)
send_timeout 60;          # Artırıldı (10 → 60)


# ============================================
# MEVCUT nginx.conf'unuz şu şekilde olmalı:
# ============================================

# user  nginx;
# worker_processes  auto;
# worker_rlimit_nofile 65535;
# 
# error_log  /var/log/nginx/error.log notice;
# pid        /run/nginx.pid;
# 
# events {
#     worker_connections  4096;
#     use epoll;
#     multi_accept on;
# }
# 
# http {
#     include       /etc/nginx/mime.types;
#     default_type  application/octet-stream;
# 
#     log_format  main  '$remote_addr - $remote_user [$time_local] "$request" '
#                       '$status $body_bytes_sent "$http_referer" '
#                       '"$http_user_agent" "$http_x_forwarded_for"';
# 
#     access_log  /var/log/nginx/access.log  main;
# 
#     sendfile        on;
#     tcp_nopush      on;
#     tcp_nodelay     on;  # ⚡ EKLENDİ
# 
#     keepalive_timeout  65;
#     keepalive_requests 1000;  # ⚡ EKLENDİ
# 
#     # ⚡ Buffer ayarları - EKLENDİ
#     client_body_buffer_size 1k;
#     client_header_buffer_size 1k;
#     client_max_body_size 1k;
#     large_client_header_buffers 2 1k;
# 
#     # ⚡ Timeout'lar - EKLENDİ
#     client_body_timeout 10;
#     client_header_timeout 10;
#     send_timeout 10;
# 
#     #gzip  on;
# 
#     include /etc/nginx/conf.d/*.conf;
#     include /etc/nginx/sites-enabled/*;
# }
